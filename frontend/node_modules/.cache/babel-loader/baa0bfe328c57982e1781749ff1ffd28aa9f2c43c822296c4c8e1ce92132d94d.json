{"ast":null,"code":"import React,{useState}from'react';import{createSite,uploadMedia}from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UploadForm(_ref){let{token,onCreated}=_ref;const[title,setTitle]=useState('');const[description,setDescription]=useState('');const[lat,setLat]=useState(31.5);const[lng,setLng]=useState(34.47);const[modelFile,setModelFile]=useState(null);async function submit(e){e.preventDefault();const sitePayload={title,description,latitude:parseFloat(lat),longitude:parseFloat(lng),media:[]};const site=await createSite(token,sitePayload);if(modelFile){await uploadMedia(token,site.id,'model3d',modelFile,'AR model');}onCreated&&onCreated(site);setTitle('');setDescription('');setModelFile(null);}return/*#__PURE__*/_jsxs(\"form\",{className:\"card\",onSubmit:submit,style:{display:'grid',gap:12},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0},children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0648\\u0642\\u0639 \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646\",/*#__PURE__*/_jsx(\"input\",{value:title,onChange:e=>setTitle(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0627\\u0644\\u0648\\u0635\\u0641\",/*#__PURE__*/_jsx(\"textarea\",{rows:3,value:description,onChange:e=>setDescription(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid\",style:{gridTemplateColumns:'1fr 1fr'},children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u062E\\u0637 \\u0627\\u0644\\u0639\\u0631\\u0636\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.000001\",value:lat,onChange:e=>setLat(e.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u062E\\u0637 \\u0627\\u0644\\u0637\\u0648\\u0644\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.000001\",value:lng,onChange:e=>setLng(e.target.value)})]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0645\\u0644\\u0641 \\u0646\\u0645\\u0648\\u0630\\u062C \\u062B\\u0644\\u0627\\u062B\\u064A \\u0627\\u0644\\u0623\\u0628\\u0639\\u0627\\u062F (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A .glb/.gltf)\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".glb,.gltf\",onChange:e=>setModelFile(e.target.files[0])})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"submit\",children:\"\\u062D\\u0641\\u0638\"})]});}","map":{"version":3,"names":["React","useState","createSite","uploadMedia","jsx","_jsx","jsxs","_jsxs","UploadForm","_ref","token","onCreated","title","setTitle","description","setDescription","lat","setLat","lng","setLng","modelFile","setModelFile","submit","e","preventDefault","sitePayload","latitude","parseFloat","longitude","media","site","id","className","onSubmit","style","display","gap","children","margin","value","onChange","target","required","rows","gridTemplateColumns","type","step","accept","files"],"sources":["C:/Users/Admin/Desktop/free-lancer/jornal/frontend/src/components/UploadForm.jsx"],"sourcesContent":["\nimport React, { useState } from 'react'\nimport { createSite, uploadMedia } from '../api'\n\nexport default function UploadForm({ token, onCreated }) {\n  const [title, setTitle] = useState('')\n  const [description, setDescription] = useState('')\n  const [lat, setLat] = useState(31.5)\n  const [lng, setLng] = useState(34.47)\n  const [modelFile, setModelFile] = useState(null)\n\n  async function submit(e) {\n    e.preventDefault()\n    const sitePayload = {\n      title, description,\n      latitude: parseFloat(lat), longitude: parseFloat(lng),\n      media: []\n    }\n    const site = await createSite(token, sitePayload)\n    if (modelFile) {\n      await uploadMedia(token, site.id, 'model3d', modelFile, 'AR model')\n    }\n    onCreated && onCreated(site)\n    setTitle(''); setDescription(''); setModelFile(null)\n  }\n\n  return (\n    <form className=\"card\" onSubmit={submit} style={{display:'grid', gap:12}}>\n      <h3 style={{margin:0}}>إضافة موقع جديد</h3>\n      <label>العنوان<input value={title} onChange={e=>setTitle(e.target.value)} required/></label>\n      <label>الوصف<textarea rows={3} value={description} onChange={e=>setDescription(e.target.value)} /></label>\n      <div className=\"grid\" style={{gridTemplateColumns:'1fr 1fr'}}>\n        <label>خط العرض<input type=\"number\" step=\"0.000001\" value={lat} onChange={e=>setLat(e.target.value)} /></label>\n        <label>خط الطول<input type=\"number\" step=\"0.000001\" value={lng} onChange={e=>setLng(e.target.value)} /></label>\n      </div>\n      <label>ملف نموذج ثلاثي الأبعاد (اختياري .glb/.gltf)<input type=\"file\" accept=\".glb,.gltf\" onChange={e=>setModelFile(e.target.files[0])} /></label>\n      <button className=\"btn\" type=\"submit\">حفظ</button>\n    </form>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}